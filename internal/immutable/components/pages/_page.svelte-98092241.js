var Et=Object.defineProperty;var Wt=(s,e,t)=>e in s?Et(s,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[e]=t;var x=(s,e,t)=>(Wt(s,typeof e!="symbol"?e+"":e,t),t);import{S as J,i as U,s as X,C as qt,k as ee,a as Ne,l as te,m as ne,h as T,c as Qe,n as W,p as Gt,b as H,I as b,D as Ft,E as jt,F as Vt,f as G,t as Z,J as xt,K as Ht,o as Be,L as Ke,M as w,N as Pe,O as Zt,B as Q,P as Ie,Q as Nt,w as se,x as re,y as ae,z as oe,H as Qt,R as Bt,T as Kt,e as Te,g as Jt,d as Ut,U as Xt}from"../../chunks/index-c6ca5b2d.js";import{r as Yt,w as $t}from"../../chunks/index-40b98a6e.js";class en{constructor(){x(this,"currentLayerId");x(this,"setups");x(this,"renderers");x(this,"needsSetup");x(this,"needsResize");x(this,"needsRedraw");x(this,"layerSequence");this.register=this.register.bind(this),this.unregister=this.unregister.bind(this),this.redraw=this.redraw.bind(this),this.resize=this.resize.bind(this),this.render=this.render.bind(this),this.currentLayerId=0,this.setups=new Map,this.renderers=new Map,this.needsSetup=!1,this.needsResize=!0,this.needsRedraw=!0,this.layerSequence=[]}redraw(){this.needsRedraw=!0}resize(){this.needsResize=!0,this.needsRedraw=!0}register({setup:e,render:t}){return e&&(this.setups.set(this.currentLayerId,e),this.needsSetup=!0),this.renderers.set(this.currentLayerId,t),this.needsRedraw=!0,this.currentLayerId++}unregister(e){this.renderers.delete(e),this.needsRedraw=!0}render({autoclear:e,pixelRatio:t,context:n,width:r,height:a}){var o;const i={context:n,width:r,height:a};if(this.needsResize&&(n.setTransform(t,0,0,t,0,0),this.needsResize=!1),this.needsSetup){for(const[h,f]of this.setups)f(i),this.setups.delete(h);this.needsSetup=!1}if(this.needsRedraw){e&&n.clearRect(0,0,r,a);for(const h of this.layerSequence)(o=this.renderers.get(h))==null||o(i);this.needsRedraw=!1}}}function tn(s){let e,t,n,r,a,i,o,h,f;const l=s[13].default,d=qt(l,s,s[12],null);return{c(){e=ee("canvas"),a=Ne(),i=ee("div"),d&&d.c(),this.h()},l(p){e=te(p,"CANVAS",{style:!0,width:!0,height:!0,class:!0}),ne(e).forEach(T),a=Qe(p),i=te(p,"DIV",{style:!0});var u=ne(i);d&&d.l(u),u.forEach(T),this.h()},h(){W(e,"style",t="display: block; width: "+s[1]+"px; height: "+s[2]+"px;"+(s[3]?` ${s[3]}`:"")),W(e,"width",n=s[1]*(s[0]??1)),W(e,"height",r=s[2]*(s[0]??1)),W(e,"class",s[4]),Gt(i,"display","none")},m(p,u){H(p,e,u),s[59](e),H(p,a,u),H(p,i,u),d&&d.m(i,null),s[60](i),o=!0,h||(f=[b(e,"focus",s[14]),b(e,"blur",s[15]),b(e,"fullscreenchange",s[16]),b(e,"fullscreenerror",s[17]),b(e,"scroll",s[18]),b(e,"cut",s[19]),b(e,"copy",s[20]),b(e,"paste",s[21]),b(e,"keydown",s[22]),b(e,"keypress",s[23]),b(e,"keyup",s[24]),b(e,"auxclick",s[25]),b(e,"click",s[26]),b(e,"contextmenu",s[27]),b(e,"dblclick",s[28]),b(e,"mousedown",s[29]),b(e,"mouseenter",s[30]),b(e,"mouseleave",s[31]),b(e,"mousemove",s[32]),b(e,"mouseover",s[33]),b(e,"mouseout",s[34]),b(e,"mouseup",s[35]),b(e,"select",s[36]),b(e,"wheel",s[37]),b(e,"drag",s[38]),b(e,"dragend",s[39]),b(e,"dragenter",s[40]),b(e,"dragstart",s[41]),b(e,"dragleave",s[42]),b(e,"dragover",s[43]),b(e,"drop",s[44]),b(e,"touchcancel",s[45]),b(e,"touchend",s[46]),b(e,"touchmove",s[47]),b(e,"touchstart",s[48]),b(e,"pointerover",s[49]),b(e,"pointerenter",s[50]),b(e,"pointerdown",s[51]),b(e,"pointermove",s[52]),b(e,"pointerup",s[53]),b(e,"pointercancel",s[54]),b(e,"pointerout",s[55]),b(e,"pointerleave",s[56]),b(e,"gotpointercapture",s[57]),b(e,"lostpointercapture",s[58])],h=!0)},p(p,u){(!o||u[0]&14&&t!==(t="display: block; width: "+p[1]+"px; height: "+p[2]+"px;"+(p[3]?` ${p[3]}`:"")))&&W(e,"style",t),(!o||u[0]&3&&n!==(n=p[1]*(p[0]??1)))&&W(e,"width",n),(!o||u[0]&5&&r!==(r=p[2]*(p[0]??1)))&&W(e,"height",r),(!o||u[0]&16)&&W(e,"class",p[4]),d&&d.p&&(!o||u[0]&4096)&&Ft(d,l,p,p[12],o?Vt(l,p[12],u,null):jt(p[12]),null)},i(p){o||(G(d,p),o=!0)},o(p){Z(d,p),o=!1},d(p){p&&T(e),s[59](null),p&&T(a),p&&T(i),d&&d.d(p),s[60](null),h=!1,xt(f)}}}const Je=Symbol(),nn=()=>Zt(Je);function sn(s,e,t){let{$$slots:n={},$$scope:r}=e,{width:a=640,height:i=640,pixelRatio:o=null,style:h="",autoclear:f=!0}=e,{class:l=""}=e,d,p=null,u,c,k;const m=new en;function M(){m.redraw()}function _(){return d}function P(){return p}o==null&&(typeof window<"u"?o=window.devicePixelRatio:o=2);function O(){m.render({context:p,width:a,height:i,pixelRatio:o,autoclear:f}),u=window.requestAnimationFrame(O)}Ht(Je,{register:m.register,unregister:m.unregister,redraw:m.redraw}),Be(()=>{p=d.getContext("2d"),k=new MutationObserver(g),k.observe(c,{childList:!0}),g(),O();function g(){const Rt=[...c.children].map(Ae=>Ae instanceof HTMLElement?parseInt(Ae.dataset.layerId??"-1"):-1);t(11,m.layerSequence=Rt,m),m.redraw()}}),Ke(()=>{typeof window>"u"||(window.cancelAnimationFrame(u),k.disconnect())});function v(g){w.call(this,s,g)}function L(g){w.call(this,s,g)}function E(g){w.call(this,s,g)}function z(g){w.call(this,s,g)}function B(g){w.call(this,s,g)}function A(g){w.call(this,s,g)}function q(g){w.call(this,s,g)}function he(g){w.call(this,s,g)}function C(g){w.call(this,s,g)}function S(g){w.call(this,s,g)}function R(g){w.call(this,s,g)}function j(g){w.call(this,s,g)}function V(g){w.call(this,s,g)}function be(g){w.call(this,s,g)}function we(g){w.call(this,s,g)}function le(g){w.call(this,s,g)}function st(g){w.call(this,s,g)}function rt(g){w.call(this,s,g)}function at(g){w.call(this,s,g)}function ot(g){w.call(this,s,g)}function it(g){w.call(this,s,g)}function ht(g){w.call(this,s,g)}function lt(g){w.call(this,s,g)}function ct(g){w.call(this,s,g)}function ut(g){w.call(this,s,g)}function ft(g){w.call(this,s,g)}function dt(g){w.call(this,s,g)}function pt(g){w.call(this,s,g)}function gt(g){w.call(this,s,g)}function mt(g){w.call(this,s,g)}function kt(g){w.call(this,s,g)}function Mt(g){w.call(this,s,g)}function yt(g){w.call(this,s,g)}function bt(g){w.call(this,s,g)}function wt(g){w.call(this,s,g)}function _t(g){w.call(this,s,g)}function vt(g){w.call(this,s,g)}function Pt(g){w.call(this,s,g)}function St(g){w.call(this,s,g)}function Ot(g){w.call(this,s,g)}function Lt(g){w.call(this,s,g)}function Ct(g){w.call(this,s,g)}function Dt(g){w.call(this,s,g)}function At(g){w.call(this,s,g)}function It(g){w.call(this,s,g)}function Tt(g){Pe[g?"unshift":"push"](()=>{d=g,t(5,d)})}function zt(g){Pe[g?"unshift":"push"](()=>{c=g,t(6,c)})}return s.$$set=g=>{"width"in g&&t(1,a=g.width),"height"in g&&t(2,i=g.height),"pixelRatio"in g&&t(0,o=g.pixelRatio),"style"in g&&t(3,h=g.style),"autoclear"in g&&t(7,f=g.autoclear),"class"in g&&t(4,l=g.class),"$$scope"in g&&t(12,r=g.$$scope)},s.$$.update=()=>{s.$$.dirty[0]&2183&&m.resize()},[o,a,i,h,l,d,c,f,M,_,P,m,r,n,v,L,E,z,B,A,q,he,C,S,R,j,V,be,we,le,st,rt,at,ot,it,ht,lt,ct,ut,ft,dt,pt,gt,mt,kt,Mt,yt,bt,wt,_t,vt,Pt,St,Ot,Lt,Ct,Dt,At,It,Tt,zt]}class rn extends J{constructor(e){super(),U(this,e,sn,tn,X,{width:1,height:2,pixelRatio:0,style:3,autoclear:7,class:4,redraw:8,getCanvas:9,getContext:10},null,[-1,-1,-1])}get redraw(){return this.$$.ctx[8]}get getCanvas(){return this.$$.ctx[9]}get getContext(){return this.$$.ctx[10]}}function an(s){let e;return{c(){e=ee("div"),this.h()},l(t){e=te(t,"DIV",{"data-layer-id":!0}),ne(e).forEach(T),this.h()},h(){W(e,"data-layer-id",s[0])},m(t,n){H(t,e,n)},p:Q,i:Q,o:Q,d(t){t&&T(e)}}}function on(s,e,t){const{register:n,unregister:r,redraw:a}=nn();let{setup:i=void 0}=e,{render:o=()=>{}}=e;const h=n({setup:i,render:o});return Ke(()=>r(h)),s.$$set=f=>{"setup"in f&&t(1,i=f.setup),"render"in f&&t(2,o=f.render)},s.$$.update=()=>{s.$$.dirty&4&&a()},[h,i,o]}class hn extends J{constructor(e){super(),U(this,e,on,an,X,{setup:1,render:2})}}let ze;const Ue=Date.now(),Xe=s=>(s(Date.now()-Ue),ze=window.requestAnimationFrame(()=>Xe(s)),()=>window.cancelAnimationFrame(ze));function ln(){}Yt(Date.now()-Ue,typeof window>"u"?ln:Xe);function Re(s){return Object.prototype.toString.call(s)==="[object Date]"}function Se(s,e,t,n){if(typeof t=="number"||Re(t)){const r=n-t,a=(t-e)/(s.dt||1/60),i=s.opts.stiffness*r,o=s.opts.damping*a,h=(i-o)*s.inv_mass,f=(a+h)*s.dt;return Math.abs(f)<s.opts.precision&&Math.abs(r)<s.opts.precision?n:(s.settled=!1,Re(t)?new Date(t.getTime()+f):t+f)}else{if(Array.isArray(t))return t.map((r,a)=>Se(s,e[a],t[a],n[a]));if(typeof t=="object"){const r={};for(const a in t)r[a]=Se(s,e[a],t[a],n[a]);return r}else throw new Error(`Cannot spring ${typeof t} values`)}}function cn(s,e={}){const t=$t(s),{stiffness:n=.15,damping:r=.8,precision:a=.01}=e;let i,o,h,f=s,l=s,d=1,p=0,u=!1;function c(m,M={}){l=m;const _=h={};return s==null||M.hard||k.stiffness>=1&&k.damping>=1?(u=!0,i=Ie(),f=m,t.set(s=l),Promise.resolve()):(M.soft&&(p=1/((M.soft===!0?.5:+M.soft)*60),d=0),o||(i=Ie(),u=!1,o=Nt(P=>{if(u)return u=!1,o=null,!1;d=Math.min(d+p,1);const O={inv_mass:d,opts:k,settled:!0,dt:(P-i)*60/1e3},v=Se(O,f,s,l);return i=P,f=s,t.set(s=v),O.settled&&(o=null),!O.settled})),new Promise(P=>{o.promise.then(()=>{_===h&&P()})}))}const k={set:c,update:(m,M)=>c(m(l,s),M),subscribe:t.subscribe,stiffness:n,damping:r,precision:a};return k}function un(s){let e,t;return e=new hn({props:{render:s[0]}}),{c(){se(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,r){ae(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.render=n[0]),e.$set(a)},i(n){t||(G(e.$$.fragment,n),t=!0)},o(n){Z(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function fn(s,e,t){let n,r,{x:a=0,y:i=0,r:o=1,stroke:h=null,strokeWidth:f=3}=e;const l=cn(o,{stiffness:.15,damping:.3});return Qt(s,l,d=>t(7,r=d)),s.$$set=d=>{"x"in d&&t(2,a=d.x),"y"in d&&t(3,i=d.y),"r"in d&&t(4,o=d.r),"stroke"in d&&t(5,h=d.stroke),"strokeWidth"in d&&t(6,f=d.strokeWidth)},s.$$.update=()=>{s.$$.dirty&16&&l.set(o),s.$$.dirty&236&&t(0,n=({context:d})=>{d.fillStyle=h||"gray",d.beginPath(),d.arc(a,i,r,0,2*Math.PI),d.fill(),h&&(d.strokeStyle=h,d.lineWidth=f,d.beginPath(),d.arc(a,i,r+f/2,0,2*Math.PI),d.stroke())})},[n,l,a,i,o,h,f,r]}class dn extends J{constructor(e){super(),U(this,e,fn,un,X,{x:2,y:3,r:4,stroke:5,strokeWidth:6})}}function Ee(s,e,t){const n=s.slice();return n[11]=e[t].x,n[12]=e[t].y,n[13]=e[t].r,n[14]=e[t].id,n}function We(s){let e,t;return e=new dn({props:{x:s[11],y:s[12],r:s[2]===s[14]?5:3,stroke:s[2]===s[14]?"gold":null}}),{c(){se(e.$$.fragment)},l(n){re(e.$$.fragment,n)},m(n,r){ae(e,n,r),t=!0},p(n,r){const a={};r&4&&(a.r=n[2]===n[14]?5:3),r&4&&(a.stroke=n[2]===n[14]?"gold":null),e.$set(a)},i(n){t||(G(e.$$.fragment,n),t=!0)},o(n){Z(e.$$.fragment,n),t=!1},d(n){oe(e,n)}}}function pn(s){let e,t,n=s[4],r=[];for(let i=0;i<n.length;i+=1)r[i]=We(Ee(s,n,i));const a=i=>Z(r[i],1,1,()=>{r[i]=null});return{c(){for(let i=0;i<r.length;i+=1)r[i].c();e=Te()},l(i){for(let o=0;o<r.length;o+=1)r[o].l(i);e=Te()},m(i,o){for(let h=0;h<r.length;h+=1)r[h].m(i,o);H(i,e,o),t=!0},p(i,o){if(o&20){n=i[4];let h;for(h=0;h<n.length;h+=1){const f=Ee(i,n,h);r[h]?(r[h].p(f,o),G(r[h],1)):(r[h]=We(f),r[h].c(),G(r[h],1),r[h].m(e.parentNode,e))}for(Jt(),h=n.length;h<r.length;h+=1)a(h);Ut()}},i(i){if(!t){for(let o=0;o<n.length;o+=1)G(r[o]);t=!0}},o(i){r=r.filter(Boolean);for(let o=0;o<r.length;o+=1)Z(r[o]);t=!1},d(i){Xt(r,i),i&&T(e)}}}function gn(s){let e,t,n,r;return t=new rn({props:{width:s[0],height:s[1],style:"cursor: pointer",$$slots:{default:[pn]},$$scope:{ctx:s}}}),t.$on("mousemove",s[5]),t.$on("mousedown",s[6]),t.$on("mouseup",s[7]),t.$on("mouseout",s[8]),{c(){e=ee("div"),se(t.$$.fragment),this.h()},l(a){e=te(a,"DIV",{class:!0});var i=ne(e);re(t.$$.fragment,i),i.forEach(T),this.h()},h(){W(e,"class","svelte-1fkge7j"),Bt(()=>s[9].call(e))},m(a,i){H(a,e,i),ae(t,e,null),n=Kt(e,s[9].bind(e)),r=!0},p(a,[i]){const o={};i&1&&(o.width=a[0]),i&2&&(o.height=a[1]),i&131076&&(o.$$scope={dirty:i,ctx:a}),t.$set(o)},i(a){r||(G(t.$$.fragment,a),r=!0)},o(a){Z(t.$$.fragment,a),r=!1},d(a){a&&T(e),oe(t),n()}}}let Ye=5;function mn(s){return 10+s*Ye*10}function kn(s,e,t){let n=Array(7).fill(null).map((u,c)=>({x:mn(c),y:10,r:Ye,id:`day${c}`})),r,a,i=null,o=!1;const h=({clientX:u,clientY:c})=>{if(c<10||c>20){t(2,i=null);return}const k=n.find(m=>u>m.x&&u<m.x+50);k&&t(2,i=k.id)},f=()=>t(3,o=!0),l=()=>t(3,o=!1),d=()=>t(2,i=null);function p(){r=this.clientWidth,a=this.clientHeight,t(0,r),t(1,a)}return[r,a,i,o,n,h,f,l,d,p]}class Mn extends J{constructor(e){super(),U(this,e,kn,gn,X,{})}}function _e(s,e,t){if(s&&s.length){const[n,r]=e,a=Math.PI/180*t,i=Math.cos(a),o=Math.sin(a);s.forEach(h=>{const[f,l]=h;h[0]=(f-n)*i-(l-r)*o+n,h[1]=(f-n)*o+(l-r)*i+r})}}function ye(s){const e=s[0],t=s[1];return Math.sqrt(Math.pow(e[0]-t[0],2)+Math.pow(e[1]-t[1],2))}function ie(s,e){const t=e.hachureAngle+90;let n=e.hachureGap;n<0&&(n=4*e.strokeWidth),n=Math.max(n,.1);const r=[0,0];if(t)for(const i of s)_e(i,r,t);const a=function(i,o){const h=[];for(const u of i){const c=[...u];c[0].join(",")!==c[c.length-1].join(",")&&c.push([c[0][0],c[0][1]]),c.length>2&&h.push(c)}const f=[];o=Math.max(o,.1);const l=[];for(const u of h)for(let c=0;c<u.length-1;c++){const k=u[c],m=u[c+1];if(k[1]!==m[1]){const M=Math.min(k[1],m[1]);l.push({ymin:M,ymax:Math.max(k[1],m[1]),x:M===k[1]?k[0]:m[0],islope:(m[0]-k[0])/(m[1]-k[1])})}}if(l.sort((u,c)=>u.ymin<c.ymin?-1:u.ymin>c.ymin?1:u.x<c.x?-1:u.x>c.x?1:u.ymax===c.ymax?0:(u.ymax-c.ymax)/Math.abs(u.ymax-c.ymax)),!l.length)return f;let d=[],p=l[0].ymin;for(;d.length||l.length;){if(l.length){let u=-1;for(let c=0;c<l.length&&!(l[c].ymin>p);c++)u=c;l.splice(0,u+1).forEach(c=>{d.push({s:p,edge:c})})}if(d=d.filter(u=>!(u.edge.ymax<=p)),d.sort((u,c)=>u.edge.x===c.edge.x?0:(u.edge.x-c.edge.x)/Math.abs(u.edge.x-c.edge.x)),d.length>1)for(let u=0;u<d.length;u+=2){const c=u+1;if(c>=d.length)break;const k=d[u].edge,m=d[c].edge;f.push([[Math.round(k.x),p],[Math.round(m.x),p]])}p+=o,d.forEach(u=>{u.edge.x=u.edge.x+o*u.edge.islope})}return f}(s,n);if(t){for(const i of s)_e(i,r,-t);(function(i,o,h){const f=[];i.forEach(l=>f.push(...l)),_e(f,o,h)})(a,r,-t)}return a}class De{constructor(e){this.helper=e}fillPolygons(e,t){return this._fillPolygons(e,t)}_fillPolygons(e,t){const n=ie(e,t);return{type:"fillSketch",ops:this.renderLines(n,t)}}renderLines(e,t){const n=[];for(const r of e)n.push(...this.helper.doubleLineOps(r[0][0],r[0][1],r[1][0],r[1][1],t));return n}}class yn extends De{fillPolygons(e,t){let n=t.hachureGap;n<0&&(n=4*t.strokeWidth),n=Math.max(n,.1);const r=ie(e,Object.assign({},t,{hachureGap:n})),a=Math.PI/180*t.hachureAngle,i=[],o=.5*n*Math.cos(a),h=.5*n*Math.sin(a);for(const[f,l]of r)ye([f,l])&&i.push([[f[0]-o,f[1]+h],[...l]],[[f[0]+o,f[1]-h],[...l]]);return{type:"fillSketch",ops:this.renderLines(i,t)}}}class bn extends De{fillPolygons(e,t){const n=this._fillPolygons(e,t),r=Object.assign({},t,{hachureAngle:t.hachureAngle+90}),a=this._fillPolygons(e,r);return n.ops=n.ops.concat(a.ops),n}}class wn{constructor(e){this.helper=e}fillPolygons(e,t){const n=ie(e,t=Object.assign({},t,{hachureAngle:0}));return this.dotsOnLines(n,t)}dotsOnLines(e,t){const n=[];let r=t.hachureGap;r<0&&(r=4*t.strokeWidth),r=Math.max(r,.1);let a=t.fillWeight;a<0&&(a=t.strokeWidth/2);const i=r/4;for(const o of e){const h=ye(o),f=h/r,l=Math.ceil(f)-1,d=h-l*r,p=(o[0][0]+o[1][0])/2-r/4,u=Math.min(o[0][1],o[1][1]);for(let c=0;c<l;c++){const k=u+d+c*r,m=p-i+2*Math.random()*i,M=k-i+2*Math.random()*i,_=this.helper.ellipse(m,M,a,a,t);n.push(..._.ops)}}return{type:"fillSketch",ops:n}}}class _n{constructor(e){this.helper=e}fillPolygons(e,t){const n=ie(e,t);return{type:"fillSketch",ops:this.dashedLine(n,t)}}dashedLine(e,t){const n=t.dashOffset<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashOffset,r=t.dashGap<0?t.hachureGap<0?4*t.strokeWidth:t.hachureGap:t.dashGap,a=[];return e.forEach(i=>{const o=ye(i),h=Math.floor(o/(n+r)),f=(o+r-h*(n+r))/2;let l=i[0],d=i[1];l[0]>d[0]&&(l=i[1],d=i[0]);const p=Math.atan((d[1]-l[1])/(d[0]-l[0]));for(let u=0;u<h;u++){const c=u*(n+r),k=c+n,m=[l[0]+c*Math.cos(p)+f*Math.cos(p),l[1]+c*Math.sin(p)+f*Math.sin(p)],M=[l[0]+k*Math.cos(p)+f*Math.cos(p),l[1]+k*Math.sin(p)+f*Math.sin(p)];a.push(...this.helper.doubleLineOps(m[0],m[1],M[0],M[1],t))}}),a}}class vn{constructor(e){this.helper=e}fillPolygons(e,t){const n=t.hachureGap<0?4*t.strokeWidth:t.hachureGap,r=t.zigzagOffset<0?n:t.zigzagOffset,a=ie(e,t=Object.assign({},t,{hachureGap:n+r}));return{type:"fillSketch",ops:this.zigzagLines(a,r,t)}}zigzagLines(e,t,n){const r=[];return e.forEach(a=>{const i=ye(a),o=Math.round(i/(2*t));let h=a[0],f=a[1];h[0]>f[0]&&(h=a[1],f=a[0]);const l=Math.atan((f[1]-h[1])/(f[0]-h[0]));for(let d=0;d<o;d++){const p=2*d*t,u=2*(d+1)*t,c=Math.sqrt(2*Math.pow(t,2)),k=[h[0]+p*Math.cos(l),h[1]+p*Math.sin(l)],m=[h[0]+u*Math.cos(l),h[1]+u*Math.sin(l)],M=[k[0]+c*Math.cos(l+Math.PI/4),k[1]+c*Math.sin(l+Math.PI/4)];r.push(...this.helper.doubleLineOps(k[0],k[1],M[0],M[1],n),...this.helper.doubleLineOps(M[0],M[1],m[0],m[1],n))}}),r}}const D={};class Pn{constructor(e){this.seed=e}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const ce={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function ve(s,e){return s.type===e}function Oe(s){const e=[],t=function(i){const o=new Array;for(;i!=="";)if(i.match(/^([ \t\r\n,]+)/))i=i.substr(RegExp.$1.length);else if(i.match(/^([aAcChHlLmMqQsStTvVzZ])/))o[o.length]={type:0,text:RegExp.$1},i=i.substr(RegExp.$1.length);else{if(!i.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))return[];o[o.length]={type:1,text:`${parseFloat(RegExp.$1)}`},i=i.substr(RegExp.$1.length)}return o[o.length]={type:2,text:""},o}(s);let n="BOD",r=0,a=t[r];for(;!ve(a,2);){let i=0;const o=[];if(n==="BOD"){if(a.text!=="M"&&a.text!=="m")return Oe("M0,0"+s);r++,i=ce[a.text],n=a.text}else ve(a,1)?i=ce[n]:(r++,i=ce[a.text],n=a.text);if(!(r+i<t.length))throw new Error("Path data ended short");for(let h=r;h<r+i;h++){const f=t[h];if(!ve(f,1))throw new Error("Param not a number: "+n+","+f.text);o[o.length]=+f.text}if(typeof ce[n]!="number")throw new Error("Bad segment: "+n);{const h={key:n,data:o};e.push(h),r+=i,a=t[r],n==="M"&&(n="L"),n==="m"&&(n="l")}}return e}function qe(s){let e=0,t=0,n=0,r=0;const a=[];for(const{key:i,data:o}of s)switch(i){case"M":a.push({key:"M",data:[...o]}),[e,t]=o,[n,r]=o;break;case"m":e+=o[0],t+=o[1],a.push({key:"M",data:[e,t]}),n=e,r=t;break;case"L":a.push({key:"L",data:[...o]}),[e,t]=o;break;case"l":e+=o[0],t+=o[1],a.push({key:"L",data:[e,t]});break;case"C":a.push({key:"C",data:[...o]}),e=o[4],t=o[5];break;case"c":{const h=o.map((f,l)=>l%2?f+t:f+e);a.push({key:"C",data:h}),e=h[4],t=h[5];break}case"Q":a.push({key:"Q",data:[...o]}),e=o[2],t=o[3];break;case"q":{const h=o.map((f,l)=>l%2?f+t:f+e);a.push({key:"Q",data:h}),e=h[2],t=h[3];break}case"A":a.push({key:"A",data:[...o]}),e=o[5],t=o[6];break;case"a":e+=o[5],t+=o[6],a.push({key:"A",data:[o[0],o[1],o[2],o[3],o[4],e,t]});break;case"H":a.push({key:"H",data:[...o]}),e=o[0];break;case"h":e+=o[0],a.push({key:"H",data:[e]});break;case"V":a.push({key:"V",data:[...o]}),t=o[0];break;case"v":t+=o[0],a.push({key:"V",data:[t]});break;case"S":a.push({key:"S",data:[...o]}),e=o[2],t=o[3];break;case"s":{const h=o.map((f,l)=>l%2?f+t:f+e);a.push({key:"S",data:h}),e=h[2],t=h[3];break}case"T":a.push({key:"T",data:[...o]}),e=o[0],t=o[1];break;case"t":e+=o[0],t+=o[1],a.push({key:"T",data:[e,t]});break;case"Z":case"z":a.push({key:"Z",data:[]}),e=n,t=r}return a}function Ge(s){const e=[];let t="",n=0,r=0,a=0,i=0,o=0,h=0;for(const{key:f,data:l}of s){switch(f){case"M":e.push({key:"M",data:[...l]}),[n,r]=l,[a,i]=l;break;case"C":e.push({key:"C",data:[...l]}),n=l[4],r=l[5],o=l[2],h=l[3];break;case"L":e.push({key:"L",data:[...l]}),[n,r]=l;break;case"H":n=l[0],e.push({key:"L",data:[n,r]});break;case"V":r=l[0],e.push({key:"L",data:[n,r]});break;case"S":{let d=0,p=0;t==="C"||t==="S"?(d=n+(n-o),p=r+(r-h)):(d=n,p=r),e.push({key:"C",data:[d,p,...l]}),o=l[0],h=l[1],n=l[2],r=l[3];break}case"T":{const[d,p]=l;let u=0,c=0;t==="Q"||t==="T"?(u=n+(n-o),c=r+(r-h)):(u=n,c=r);const k=n+2*(u-n)/3,m=r+2*(c-r)/3,M=d+2*(u-d)/3,_=p+2*(c-p)/3;e.push({key:"C",data:[k,m,M,_,d,p]}),o=u,h=c,n=d,r=p;break}case"Q":{const[d,p,u,c]=l,k=n+2*(d-n)/3,m=r+2*(p-r)/3,M=u+2*(d-u)/3,_=c+2*(p-c)/3;e.push({key:"C",data:[k,m,M,_,u,c]}),o=d,h=p,n=u,r=c;break}case"A":{const d=Math.abs(l[0]),p=Math.abs(l[1]),u=l[2],c=l[3],k=l[4],m=l[5],M=l[6];d===0||p===0?(e.push({key:"C",data:[n,r,m,M,m,M]}),n=m,r=M):(n!==m||r!==M)&&($e(n,r,m,M,d,p,u,c,k).forEach(function(_){e.push({key:"C",data:_})}),n=m,r=M);break}case"Z":e.push({key:"Z",data:[]}),n=a,r=i}t=f}return e}function Y(s,e,t){return[s*Math.cos(t)-e*Math.sin(t),s*Math.sin(t)+e*Math.cos(t)]}function $e(s,e,t,n,r,a,i,o,h,f){const l=(d=i,Math.PI*d/180);var d;let p=[],u=0,c=0,k=0,m=0;if(f)[u,c,k,m]=f;else{[s,e]=Y(s,e,-l),[t,n]=Y(t,n,-l);const C=(s-t)/2,S=(e-n)/2;let R=C*C/(r*r)+S*S/(a*a);R>1&&(R=Math.sqrt(R),r*=R,a*=R);const j=r*r,V=a*a,be=j*V-j*S*S-V*C*C,we=j*S*S+V*C*C,le=(o===h?-1:1)*Math.sqrt(Math.abs(be/we));k=le*r*S/a+(s+t)/2,m=le*-a*C/r+(e+n)/2,u=Math.asin(parseFloat(((e-m)/a).toFixed(9))),c=Math.asin(parseFloat(((n-m)/a).toFixed(9))),s<k&&(u=Math.PI-u),t<k&&(c=Math.PI-c),u<0&&(u=2*Math.PI+u),c<0&&(c=2*Math.PI+c),h&&u>c&&(u-=2*Math.PI),!h&&c>u&&(c-=2*Math.PI)}let M=c-u;if(Math.abs(M)>120*Math.PI/180){const C=c,S=t,R=n;c=h&&c>u?u+120*Math.PI/180*1:u+120*Math.PI/180*-1,p=$e(t=k+r*Math.cos(c),n=m+a*Math.sin(c),S,R,r,a,i,0,h,[c,C,k,m])}M=c-u;const _=Math.cos(u),P=Math.sin(u),O=Math.cos(c),v=Math.sin(c),L=Math.tan(M/4),E=4/3*r*L,z=4/3*a*L,B=[s,e],A=[s+E*P,e-z*_],q=[t+E*v,n-z*O],he=[t,n];if(A[0]=2*B[0]-A[0],A[1]=2*B[1]-A[1],f)return[A,q,he].concat(p);{p=[A,q,he].concat(p);const C=[];for(let S=0;S<p.length;S+=3){const R=Y(p[S][0],p[S][1],l),j=Y(p[S+1][0],p[S+1][1],l),V=Y(p[S+2][0],p[S+2][1],l);C.push([R[0],R[1],j[0],j[1],V[0],V[1]])}return C}}const Sn={randOffset:function(s,e){return y(s,e)},randOffsetWithRange:function(s,e,t){return ge(s,e,t)},ellipse:function(s,e,t,n,r){const a=tt(t,n,r);return Le(s,e,r,a).opset},doubleLineOps:function(s,e,t,n,r){return F(s,e,t,n,r,!0)}};function et(s,e,t,n,r){return{type:"path",ops:F(s,e,t,n,r)}}function de(s,e,t){const n=(s||[]).length;if(n>2){const r=[];for(let a=0;a<n-1;a++)r.push(...F(s[a][0],s[a][1],s[a+1][0],s[a+1][1],t));return e&&r.push(...F(s[n-1][0],s[n-1][1],s[0][0],s[0][1],t)),{type:"path",ops:r}}return n===2?et(s[0][0],s[0][1],s[1][0],s[1][1],t):{type:"path",ops:[]}}function On(s,e,t,n,r){return function(a,i){return de(a,!0,i)}([[s,e],[s+t,e],[s+t,e+n],[s,e+n]],r)}function Ln(s,e){let t=Ve(s,1*(1+.2*e.roughness),e);if(!e.disableMultiStroke){const n=Ve(s,1.5*(1+.22*e.roughness),function(r){const a=Object.assign({},r);return a.randomizer=void 0,r.seed&&(a.seed=r.seed+1),a}(e));t=t.concat(n)}return{type:"path",ops:t}}function tt(s,e,t){const n=Math.sqrt(2*Math.PI*Math.sqrt((Math.pow(s/2,2)+Math.pow(e/2,2))/2)),r=Math.ceil(Math.max(t.curveStepCount,t.curveStepCount/Math.sqrt(200)*n)),a=2*Math.PI/r;let i=Math.abs(s/2),o=Math.abs(e/2);const h=1-t.curveFitting;return i+=y(i*h,t),o+=y(o*h,t),{increment:a,rx:i,ry:o}}function Le(s,e,t,n){const[r,a]=xe(n.increment,s,e,n.rx,n.ry,1,n.increment*ge(.1,ge(.4,1,t),t),t);let i=me(r,null,t);if(!t.disableMultiStroke&&t.roughness!==0){const[o]=xe(n.increment,s,e,n.rx,n.ry,1.5,0,t),h=me(o,null,t);i=i.concat(h)}return{estimatedPoints:a,opset:{type:"path",ops:i}}}function Fe(s,e,t,n,r,a,i,o,h){const f=s,l=e;let d=Math.abs(t/2),p=Math.abs(n/2);d+=y(.01*d,h),p+=y(.01*p,h);let u=r,c=a;for(;u<0;)u+=2*Math.PI,c+=2*Math.PI;c-u>2*Math.PI&&(u=0,c=2*Math.PI);const k=2*Math.PI/h.curveStepCount,m=Math.min(k/2,(c-u)/2),M=He(m,f,l,d,p,u,c,1,h);if(!h.disableMultiStroke){const _=He(m,f,l,d,p,u,c,1.5,h);M.push(..._)}return i&&(o?M.push(...F(f,l,f+d*Math.cos(u),l+p*Math.sin(u),h),...F(f,l,f+d*Math.cos(c),l+p*Math.sin(c),h)):M.push({op:"lineTo",data:[f,l]},{op:"lineTo",data:[f+d*Math.cos(u),l+p*Math.sin(u)]})),{type:"path",ops:M}}function ue(s,e){const t=[];for(const n of s)if(n.length){const r=e.maxRandomnessOffset||0,a=n.length;if(a>2){t.push({op:"move",data:[n[0][0]+y(r,e),n[0][1]+y(r,e)]});for(let i=1;i<a;i++)t.push({op:"lineTo",data:[n[i][0]+y(r,e),n[i][1]+y(r,e)]})}}return{type:"fillPath",ops:t}}function K(s,e){return function(t,n){let r=t.fillStyle||"hachure";if(!D[r])switch(r){case"zigzag":D[r]||(D[r]=new yn(n));break;case"cross-hatch":D[r]||(D[r]=new bn(n));break;case"dots":D[r]||(D[r]=new wn(n));break;case"dashed":D[r]||(D[r]=new _n(n));break;case"zigzag-line":D[r]||(D[r]=new vn(n));break;case"hachure":default:r="hachure",D[r]||(D[r]=new De(n))}return D[r]}(e,Sn).fillPolygons(s,e)}function nt(s){return s.randomizer||(s.randomizer=new Pn(s.seed||0)),s.randomizer.next()}function ge(s,e,t,n=1){return t.roughness*n*(nt(t)*(e-s)+s)}function y(s,e,t=1){return ge(-s,s,e,t)}function F(s,e,t,n,r,a=!1){const i=a?r.disableMultiStrokeFill:r.disableMultiStroke,o=je(s,e,t,n,r,!0,!1);if(i)return o;const h=je(s,e,t,n,r,!0,!0);return o.concat(h)}function je(s,e,t,n,r,a,i){const o=Math.pow(s-t,2)+Math.pow(e-n,2),h=Math.sqrt(o);let f=1;f=h<200?1:h>500?.4:-.0016668*h+1.233334;let l=r.maxRandomnessOffset||0;l*l*100>o&&(l=h/10);const d=l/2,p=.2+.2*nt(r);let u=r.bowing*r.maxRandomnessOffset*(n-e)/200,c=r.bowing*r.maxRandomnessOffset*(s-t)/200;u=y(u,r,f),c=y(c,r,f);const k=[],m=()=>y(d,r,f),M=()=>y(l,r,f),_=r.preserveVertices;return a&&(i?k.push({op:"move",data:[s+(_?0:m()),e+(_?0:m())]}):k.push({op:"move",data:[s+(_?0:y(l,r,f)),e+(_?0:y(l,r,f))]})),i?k.push({op:"bcurveTo",data:[u+s+(t-s)*p+m(),c+e+(n-e)*p+m(),u+s+2*(t-s)*p+m(),c+e+2*(n-e)*p+m(),t+(_?0:m()),n+(_?0:m())]}):k.push({op:"bcurveTo",data:[u+s+(t-s)*p+M(),c+e+(n-e)*p+M(),u+s+2*(t-s)*p+M(),c+e+2*(n-e)*p+M(),t+(_?0:M()),n+(_?0:M())]}),k}function Ve(s,e,t){const n=[];n.push([s[0][0]+y(e,t),s[0][1]+y(e,t)]),n.push([s[0][0]+y(e,t),s[0][1]+y(e,t)]);for(let r=1;r<s.length;r++)n.push([s[r][0]+y(e,t),s[r][1]+y(e,t)]),r===s.length-1&&n.push([s[r][0]+y(e,t),s[r][1]+y(e,t)]);return me(n,null,t)}function me(s,e,t){const n=s.length,r=[];if(n>3){const a=[],i=1-t.curveTightness;r.push({op:"move",data:[s[1][0],s[1][1]]});for(let o=1;o+2<n;o++){const h=s[o];a[0]=[h[0],h[1]],a[1]=[h[0]+(i*s[o+1][0]-i*s[o-1][0])/6,h[1]+(i*s[o+1][1]-i*s[o-1][1])/6],a[2]=[s[o+1][0]+(i*s[o][0]-i*s[o+2][0])/6,s[o+1][1]+(i*s[o][1]-i*s[o+2][1])/6],a[3]=[s[o+1][0],s[o+1][1]],r.push({op:"bcurveTo",data:[a[1][0],a[1][1],a[2][0],a[2][1],a[3][0],a[3][1]]})}if(e&&e.length===2){const o=t.maxRandomnessOffset;r.push({op:"lineTo",data:[e[0]+y(o,t),e[1]+y(o,t)]})}}else n===3?(r.push({op:"move",data:[s[1][0],s[1][1]]}),r.push({op:"bcurveTo",data:[s[1][0],s[1][1],s[2][0],s[2][1],s[2][0],s[2][1]]})):n===2&&r.push(...F(s[0][0],s[0][1],s[1][0],s[1][1],t));return r}function xe(s,e,t,n,r,a,i,o){const h=[],f=[];if(o.roughness===0){s/=4,f.push([e+n*Math.cos(-s),t+r*Math.sin(-s)]);for(let l=0;l<=2*Math.PI;l+=s){const d=[e+n*Math.cos(l),t+r*Math.sin(l)];h.push(d),f.push(d)}f.push([e+n*Math.cos(0),t+r*Math.sin(0)]),f.push([e+n*Math.cos(s),t+r*Math.sin(s)])}else{const l=y(.5,o)-Math.PI/2;f.push([y(a,o)+e+.9*n*Math.cos(l-s),y(a,o)+t+.9*r*Math.sin(l-s)]);const d=2*Math.PI+l-.01;for(let p=l;p<d;p+=s){const u=[y(a,o)+e+n*Math.cos(p),y(a,o)+t+r*Math.sin(p)];h.push(u),f.push(u)}f.push([y(a,o)+e+n*Math.cos(l+2*Math.PI+.5*i),y(a,o)+t+r*Math.sin(l+2*Math.PI+.5*i)]),f.push([y(a,o)+e+.98*n*Math.cos(l+i),y(a,o)+t+.98*r*Math.sin(l+i)]),f.push([y(a,o)+e+.9*n*Math.cos(l+.5*i),y(a,o)+t+.9*r*Math.sin(l+.5*i)])}return[f,h]}function He(s,e,t,n,r,a,i,o,h){const f=a+y(.1,h),l=[];l.push([y(o,h)+e+.9*n*Math.cos(f-s),y(o,h)+t+.9*r*Math.sin(f-s)]);for(let d=f;d<=i;d+=s)l.push([y(o,h)+e+n*Math.cos(d),y(o,h)+t+r*Math.sin(d)]);return l.push([e+n*Math.cos(i),t+r*Math.sin(i)]),l.push([e+n*Math.cos(i),t+r*Math.sin(i)]),me(l,null,h)}function Cn(s,e,t,n,r,a,i,o){const h=[],f=[o.maxRandomnessOffset||1,(o.maxRandomnessOffset||1)+.3];let l=[0,0];const d=o.disableMultiStroke?1:2,p=o.preserveVertices;for(let u=0;u<d;u++)u===0?h.push({op:"move",data:[i[0],i[1]]}):h.push({op:"move",data:[i[0]+(p?0:y(f[0],o)),i[1]+(p?0:y(f[0],o))]}),l=p?[r,a]:[r+y(f[u],o),a+y(f[u],o)],h.push({op:"bcurveTo",data:[s+y(f[u],o),e+y(f[u],o),t+y(f[u],o),n+y(f[u],o),l[0],l[1]]});return h}function $(s){return[...s]}function pe(s,e){return Math.pow(s[0]-e[0],2)+Math.pow(s[1]-e[1],2)}function Dn(s,e,t){const n=pe(e,t);if(n===0)return pe(s,e);let r=((s[0]-e[0])*(t[0]-e[0])+(s[1]-e[1])*(t[1]-e[1]))/n;return r=Math.max(0,Math.min(1,r)),pe(s,N(e,t,r))}function N(s,e,t){return[s[0]+(e[0]-s[0])*t,s[1]+(e[1]-s[1])*t]}function Ce(s,e,t,n){const r=n||[];if(function(o,h){const f=o[h+0],l=o[h+1],d=o[h+2],p=o[h+3];let u=3*l[0]-2*f[0]-p[0];u*=u;let c=3*l[1]-2*f[1]-p[1];c*=c;let k=3*d[0]-2*p[0]-f[0];k*=k;let m=3*d[1]-2*p[1]-f[1];return m*=m,u<k&&(u=k),c<m&&(c=m),u+c}(s,e)<t){const o=s[e+0];r.length?(a=r[r.length-1],i=o,Math.sqrt(pe(a,i))>1&&r.push(o)):r.push(o),r.push(s[e+3])}else{const h=s[e+0],f=s[e+1],l=s[e+2],d=s[e+3],p=N(h,f,.5),u=N(f,l,.5),c=N(l,d,.5),k=N(p,u,.5),m=N(u,c,.5),M=N(k,m,.5);Ce([h,p,k,M],0,t,r),Ce([M,m,c,d],0,t,r)}var a,i;return r}function An(s,e){return ke(s,0,s.length,e)}function ke(s,e,t,n,r){const a=r||[],i=s[e],o=s[t-1];let h=0,f=1;for(let l=e+1;l<t-1;++l){const d=Dn(s[l],i,o);d>h&&(h=d,f=l)}return Math.sqrt(h)>n?(ke(s,e,f+1,n,a),ke(s,f,t,n,a)):(a.length||a.push(i),a.push(o)),a}function Ze(s,e=.15,t){const n=[],r=(s.length-1)/3;for(let a=0;a<r;a++)Ce(s,3*a,e,n);return t&&t>0?ke(n,0,n.length,t):n}const I="none";class Me{constructor(e){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1},this.config=e||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return Math.floor(Math.random()*2**31)}_o(e){return e?Object.assign({},this.defaultOptions,e):this.defaultOptions}_d(e,t,n){return{shape:e,sets:t||[],options:n||this.defaultOptions}}line(e,t,n,r,a){const i=this._o(a);return this._d("line",[et(e,t,n,r,i)],i)}rectangle(e,t,n,r,a){const i=this._o(a),o=[],h=On(e,t,n,r,i);if(i.fill){const f=[[e,t],[e+n,t],[e+n,t+r],[e,t+r]];i.fillStyle==="solid"?o.push(ue([f],i)):o.push(K([f],i))}return i.stroke!==I&&o.push(h),this._d("rectangle",o,i)}ellipse(e,t,n,r,a){const i=this._o(a),o=[],h=tt(n,r,i),f=Le(e,t,i,h);if(i.fill)if(i.fillStyle==="solid"){const l=Le(e,t,i,h).opset;l.type="fillPath",o.push(l)}else o.push(K([f.estimatedPoints],i));return i.stroke!==I&&o.push(f.opset),this._d("ellipse",o,i)}circle(e,t,n,r){const a=this.ellipse(e,t,n,n,r);return a.shape="circle",a}linearPath(e,t){const n=this._o(t);return this._d("linearPath",[de(e,!1,n)],n)}arc(e,t,n,r,a,i,o=!1,h){const f=this._o(h),l=[],d=Fe(e,t,n,r,a,i,o,!0,f);if(o&&f.fill)if(f.fillStyle==="solid"){const p=Object.assign({},f);p.disableMultiStroke=!0;const u=Fe(e,t,n,r,a,i,!0,!1,p);u.type="fillPath",l.push(u)}else l.push(function(p,u,c,k,m,M,_){const P=p,O=u;let v=Math.abs(c/2),L=Math.abs(k/2);v+=y(.01*v,_),L+=y(.01*L,_);let E=m,z=M;for(;E<0;)E+=2*Math.PI,z+=2*Math.PI;z-E>2*Math.PI&&(E=0,z=2*Math.PI);const B=(z-E)/_.curveStepCount,A=[];for(let q=E;q<=z;q+=B)A.push([P+v*Math.cos(q),O+L*Math.sin(q)]);return A.push([P+v*Math.cos(z),O+L*Math.sin(z)]),A.push([P,O]),K([A],_)}(e,t,n,r,a,i,f));return f.stroke!==I&&l.push(d),this._d("arc",l,f)}curve(e,t){const n=this._o(t),r=[],a=Ln(e,n);if(n.fill&&n.fill!==I&&e.length>=3){const i=Ze(function(o,h=0){const f=o.length;if(f<3)throw new Error("A curve must have at least three points.");const l=[];if(f===3)l.push($(o[0]),$(o[1]),$(o[2]),$(o[2]));else{const d=[];d.push(o[0],o[0]);for(let c=1;c<o.length;c++)d.push(o[c]),c===o.length-1&&d.push(o[c]);const p=[],u=1-h;l.push($(d[0]));for(let c=1;c+2<d.length;c++){const k=d[c];p[0]=[k[0],k[1]],p[1]=[k[0]+(u*d[c+1][0]-u*d[c-1][0])/6,k[1]+(u*d[c+1][1]-u*d[c-1][1])/6],p[2]=[d[c+1][0]+(u*d[c][0]-u*d[c+2][0])/6,d[c+1][1]+(u*d[c][1]-u*d[c+2][1])/6],p[3]=[d[c+1][0],d[c+1][1]],l.push(p[1],p[2],p[3])}}return l}(e),10,(1+n.roughness)/2);n.fillStyle==="solid"?r.push(ue([i],n)):r.push(K([i],n))}return n.stroke!==I&&r.push(a),this._d("curve",r,n)}polygon(e,t){const n=this._o(t),r=[],a=de(e,!0,n);return n.fill&&(n.fillStyle==="solid"?r.push(ue([e],n)):r.push(K([e],n))),n.stroke!==I&&r.push(a),this._d("polygon",r,n)}path(e,t){const n=this._o(t),r=[];if(!e)return this._d("path",r,n);e=(e||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const a=n.fill&&n.fill!=="transparent"&&n.fill!==I,i=n.stroke!==I,o=!!(n.simplification&&n.simplification<1),h=function(f,l,d){const p=Ge(qe(Oe(f))),u=[];let c=[],k=[0,0],m=[];const M=()=>{m.length>=4&&c.push(...Ze(m,l)),m=[]},_=()=>{M(),c.length&&(u.push(c),c=[])};for(const{key:O,data:v}of p)switch(O){case"M":_(),k=[v[0],v[1]],c.push(k);break;case"L":M(),c.push([v[0],v[1]]);break;case"C":if(!m.length){const L=c.length?c[c.length-1]:k;m.push([L[0],L[1]])}m.push([v[0],v[1]]),m.push([v[2],v[3]]),m.push([v[4],v[5]]);break;case"Z":M(),c.push([k[0],k[1]])}if(_(),!d)return u;const P=[];for(const O of u){const v=An(O,d);v.length&&P.push(v)}return P}(e,1,o?4-4*n.simplification:(1+n.roughness)/2);return a&&(n.fillStyle==="solid"?r.push(ue(h,n)):r.push(K(h,n))),i&&(o?h.forEach(f=>{r.push(de(f,!1,n))}):r.push(function(f,l){const d=Ge(qe(Oe(f))),p=[];let u=[0,0],c=[0,0];for(const{key:k,data:m}of d)switch(k){case"M":{const M=1*(l.maxRandomnessOffset||0),_=l.preserveVertices;p.push({op:"move",data:m.map(P=>P+(_?0:y(M,l)))}),c=[m[0],m[1]],u=[m[0],m[1]];break}case"L":p.push(...F(c[0],c[1],m[0],m[1],l)),c=[m[0],m[1]];break;case"C":{const[M,_,P,O,v,L]=m;p.push(...Cn(M,_,P,O,v,L,c,l)),c=[v,L];break}case"Z":p.push(...F(c[0],c[1],u[0],u[1],l)),c=[u[0],u[1]]}return{type:"path",ops:p}}(e,n))),this._d("path",r,n)}opsToPath(e,t){let n="";for(const r of e.ops){const a=typeof t=="number"&&t>=0?r.data.map(i=>+i.toFixed(t)):r.data;switch(r.op){case"move":n+=`M${a[0]} ${a[1]} `;break;case"bcurveTo":n+=`C${a[0]} ${a[1]}, ${a[2]} ${a[3]}, ${a[4]} ${a[5]} `;break;case"lineTo":n+=`L${a[0]} ${a[1]} `}}return n.trim()}toPaths(e){const t=e.sets||[],n=e.options||this.defaultOptions,r=[];for(const a of t){let i=null;switch(a.type){case"path":i={d:this.opsToPath(a),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:I};break;case"fillPath":i={d:this.opsToPath(a),stroke:I,strokeWidth:0,fill:n.fill||I};break;case"fillSketch":i=this.fillSketch(a,n)}i&&r.push(i)}return r}fillSketch(e,t){let n=t.fillWeight;return n<0&&(n=t.strokeWidth/2),{d:this.opsToPath(e),stroke:t.fill||I,strokeWidth:n,fill:I}}}class In{constructor(e,t){this.canvas=e,this.ctx=this.canvas.getContext("2d"),this.gen=new Me(t)}draw(e){const t=e.sets||[],n=e.options||this.getDefaultOptions(),r=this.ctx,a=e.options.fixedDecimalPlaceDigits;for(const i of t)switch(i.type){case"path":r.save(),r.strokeStyle=n.stroke==="none"?"transparent":n.stroke,r.lineWidth=n.strokeWidth,n.strokeLineDash&&r.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(r.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(r,i,a),r.restore();break;case"fillPath":{r.save(),r.fillStyle=n.fill||"";const o=e.shape==="curve"||e.shape==="polygon"||e.shape==="path"?"evenodd":"nonzero";this._drawToContext(r,i,a,o),r.restore();break}case"fillSketch":this.fillSketch(r,i,n)}}fillSketch(e,t,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2),e.save(),n.fillLineDash&&e.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(e.lineDashOffset=n.fillLineDashOffset),e.strokeStyle=n.fill||"",e.lineWidth=r,this._drawToContext(e,t,n.fixedDecimalPlaceDigits),e.restore()}_drawToContext(e,t,n,r="nonzero"){e.beginPath();for(const a of t.ops){const i=typeof n=="number"&&n>=0?a.data.map(o=>+o.toFixed(n)):a.data;switch(a.op){case"move":e.moveTo(i[0],i[1]);break;case"bcurveTo":e.bezierCurveTo(i[0],i[1],i[2],i[3],i[4],i[5]);break;case"lineTo":e.lineTo(i[0],i[1])}}t.type==="fillPath"?e.fill(r):e.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(e,t,n,r,a){const i=this.gen.line(e,t,n,r,a);return this.draw(i),i}rectangle(e,t,n,r,a){const i=this.gen.rectangle(e,t,n,r,a);return this.draw(i),i}ellipse(e,t,n,r,a){const i=this.gen.ellipse(e,t,n,r,a);return this.draw(i),i}circle(e,t,n,r){const a=this.gen.circle(e,t,n,r);return this.draw(a),a}linearPath(e,t){const n=this.gen.linearPath(e,t);return this.draw(n),n}polygon(e,t){const n=this.gen.polygon(e,t);return this.draw(n),n}arc(e,t,n,r,a,i,o=!1,h){const f=this.gen.arc(e,t,n,r,a,i,o,h);return this.draw(f),f}curve(e,t){const n=this.gen.curve(e,t);return this.draw(n),n}path(e,t){const n=this.gen.path(e,t);return this.draw(n),n}}const fe="http://www.w3.org/2000/svg";class Tn{constructor(e,t){this.svg=e,this.gen=new Me(t)}draw(e){const t=e.sets||[],n=e.options||this.getDefaultOptions(),r=this.svg.ownerDocument||window.document,a=r.createElementNS(fe,"g"),i=e.options.fixedDecimalPlaceDigits;for(const o of t){let h=null;switch(o.type){case"path":h=r.createElementNS(fe,"path"),h.setAttribute("d",this.opsToPath(o,i)),h.setAttribute("stroke",n.stroke),h.setAttribute("stroke-width",n.strokeWidth+""),h.setAttribute("fill","none"),n.strokeLineDash&&h.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&h.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break;case"fillPath":h=r.createElementNS(fe,"path"),h.setAttribute("d",this.opsToPath(o,i)),h.setAttribute("stroke","none"),h.setAttribute("stroke-width","0"),h.setAttribute("fill",n.fill||""),e.shape!=="curve"&&e.shape!=="polygon"||h.setAttribute("fill-rule","evenodd");break;case"fillSketch":h=this.fillSketch(r,o,n)}h&&a.appendChild(h)}return a}fillSketch(e,t,n){let r=n.fillWeight;r<0&&(r=n.strokeWidth/2);const a=e.createElementNS(fe,"path");return a.setAttribute("d",this.opsToPath(t,n.fixedDecimalPlaceDigits)),a.setAttribute("stroke",n.fill||""),a.setAttribute("stroke-width",r+""),a.setAttribute("fill","none"),n.fillLineDash&&a.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&a.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),a}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(e,t){return this.gen.opsToPath(e,t)}line(e,t,n,r,a){const i=this.gen.line(e,t,n,r,a);return this.draw(i)}rectangle(e,t,n,r,a){const i=this.gen.rectangle(e,t,n,r,a);return this.draw(i)}ellipse(e,t,n,r,a){const i=this.gen.ellipse(e,t,n,r,a);return this.draw(i)}circle(e,t,n,r){const a=this.gen.circle(e,t,n,r);return this.draw(a)}linearPath(e,t){const n=this.gen.linearPath(e,t);return this.draw(n)}polygon(e,t){const n=this.gen.polygon(e,t);return this.draw(n)}arc(e,t,n,r,a,i,o=!1,h){const f=this.gen.arc(e,t,n,r,a,i,o,h);return this.draw(f)}curve(e,t){const n=this.gen.curve(e,t);return this.draw(n)}path(e,t){const n=this.gen.path(e,t);return this.draw(n)}}var zn={canvas:(s,e)=>new In(s,e),svg:(s,e)=>new Tn(s,e),generator:s=>new Me(s),newSeed:()=>Me.newSeed()};function Rn(s){let e;return{c(){e=ee("canvas"),this.h()},l(t){e=te(t,"CANVAS",{height:!0}),ne(e).forEach(T),this.h()},h(){W(e,"height",En)},m(t,n){H(t,e,n),s[1](e)},p:Q,i:Q,o:Q,d(t){t&&T(e),s[1](null)}}}let En=300;function Wn(s,e,t){let n;Be(()=>{let a=zn.canvas(n);a.rectangle(10,10,200,200,{fill:"limegreen",hachureAngle:45,hachureGap:5}),a.path("M230 80 A 45 45, 0, 1, 0, 275 125 L 275 80 Z",{fill:"purple",hachureAngle:60,hachureGap:5})});function r(a){Pe[a?"unshift":"push"](()=>{n=a,t(0,n)})}return[n,r]}class qn extends J{constructor(e){super(),U(this,e,Wn,Rn,X,{})}}function Gn(s){let e,t,n,r;return e=new qn({}),n=new Mn({}),{c(){se(e.$$.fragment),t=Ne(),se(n.$$.fragment)},l(a){re(e.$$.fragment,a),t=Qe(a),re(n.$$.fragment,a)},m(a,i){ae(e,a,i),H(a,t,i),ae(n,a,i),r=!0},p:Q,i(a){r||(G(e.$$.fragment,a),G(n.$$.fragment,a),r=!0)},o(a){Z(e.$$.fragment,a),Z(n.$$.fragment,a),r=!1},d(a){oe(e,a),a&&T(t),oe(n,a)}}}class xn extends J{constructor(e){super(),U(this,e,null,Gn,X,{})}}export{xn as default};
